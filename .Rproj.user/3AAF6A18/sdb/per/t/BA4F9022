{
    "collab_server" : "",
    "contents" : "subset(demog, town == \"Bedwellty\", select = c(year,pop,births))->dta\n\nsubset(measles, town == \"Bedwellty\", select = c(date,cases))->dta_meas\n###########################################################################\nloc <- url(\"http://kingaa.github.io/sbied/intro/parus.csv\")\ndat <- read.csv(loc)\nhead(dat)\nnames(dat) = c(\"time\",\"cases\")\ndat$time = dat$time - 20\nnames(dta) = c(\"time\",\"Z\",\"b1\")\n##########################################################################\nlibrary(pomp)\nTSIR <- pomp(dat,times=\"time\",t0=1940)\n\nstochStep <- Csnippet(\"\n                      theta = rpois(m);\n                      lambda = B*(S + Z)*pow(I + theta,alpha);\n                      double ll = nearbyint(lambda);\n                      I = rnbinom(ll,I);\n                      \")\nrmeas <- Csnippet(\"cases = rpois(I);\")\ndmeas <- Csnippet(\"lik = dpois(cases,I,give_log);\")\n\n\npomp(TSIR,\n     rprocess=discrete.time.sim(step.fun=stochStep,delta.t=1),\n     paramnames=c(\"m\",\"B\",\"alpha\",\"S\"),\n     params = c(m=50, B = .2, alpha = .5 , S = 10, I.0 = .6, lambda.0 =50, theta.0 =5),\n     statenames=c(\"I\",\"lambda\",\"theta\"),\n     rmeasure = rmeas,\n     dmeasure = dmeas,\n     covar = dta,\n     tcovar= \"time\") -> TSIR\n\n\n\nplot(simulate(TSIR))\nsimulate(TSIR, as=T)\n",
    "created" : 1490111392953.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2411747116",
    "id" : "BA4F9022",
    "lastKnownWriteTime" : 1490117840,
    "last_content_update" : 1490117840563,
    "path" : "~/GitHub/TSIR_POMP/Model.R",
    "project_path" : "Model.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}